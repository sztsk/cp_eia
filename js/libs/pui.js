/*
 * Copyright 2014, UED TEAM
 *
 * Released on: 2014-07-01 10:47:26 AM  P_JDYGHUA
*/
!function(a){a.rAF=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)}}(window),function(a,b){if(!a.Pui){var c=a.Pui={version:"0.1.0"};c.mix=function(a,b){for(var c in b)a[c]=b[c];return a},c.mix(c,{$win:b(a),$doc:b(document),add:function(a,c){var d,e={},f=this;if("string"!=typeof a)return void b.error(a+"必须是个字符串！");f[a]=f[a]||{},d=c(e,f,b),d&&b.isPlainObject(d)&&b.extend(e,d);for(var g in e)f[a][g]=e[g],"init"===g?e[g]():"lazyInit"===g?!function(b){setTimeout(function(){f[a][b]()},1e3)}(g):"winLoad"===g&&!function(b){f.$win.load(function(){f[a][b]()})}(g);e=null},supports:function(a){var b,c=document.createElement("div"),d="Khtml Ms O Moz Webkit".split(" ");if(a in c.style)return!0;for(a=a.replace(/^[a-z]/,function(a){return a.toUpperCase()}),b=d.length-1;b>=0;){if(d[b]+a in c.style)return!0;b--}return!1},debounce:function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},throttle:function(a,b){var c,d,e,f,g,h,i=this.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var j=function(){e=null,g&&(h=a.apply(c,d)),i()};return e||(e=setTimeout(j,b)),f?g=!0:(f=!0,h=a.apply(c,d)),i(),h}},loadAsset:function(a){var c=a.find("[data-src]");c.length&&c.each(function(){var a=b(this),c=a.attr("data-src");a.attr("src",c).removeAttr("data-src")})}}),function(a){function b(a,b){var d={};if(c(a)&&a.length>0)for(var e,g,i,j=b?h:f,k=a.split(/;\s/g),l=0,m=k.length;m>l;l++){if(i=k[l].match(/([^=]+)=/i),i instanceof Array)try{e=h(i[1]),g=j(k[l].substring(i[1].length+1))}catch(n){}else e=h(k[l]),g="";e&&(d[e]=g)}return d}function c(a){return"string"==typeof a}function d(a){return c(a)&&""!==a}function e(a){if(!d(a))throw new TypeError("Cookie name must be a non-empty string")}function f(a){return a}var g={},h=decodeURIComponent,i=encodeURIComponent;g.get=function(a,c){e(a),c="function"==typeof c?{converter:c}:c||{};var d=b(document.cookie,!c.raw);return(c.converter||f)(d[a])},g.set=function(a,b,c){e(a),c=c||{};var f=c.expires,g=c.domain,h=c.path;c.raw||(b=i(String(b)));var j=a+"="+b,k=f;return"number"==typeof k&&(k=new Date,k.setDate(k.getDate()+f)),k instanceof Date&&(j+="; expires="+k.toUTCString()),d(g)&&(j+="; domain="+g),d(h)&&(j+="; path="+h),c.secure&&(j+="; secure"),document.cookie=j,j},g.remove=function(a,b){return b=b||{},b.expires=new Date(0),this.set(a,"",b)},a.cookie=g}(c),function(a){var b=null,c="undefined"!=typeof JSON;"undefined"!=typeof localStorage&&(b=localStorage),a.localStore={set:function(c,d){return b&&a.localStore.canStore(d)?(b.setItem(c,JSON.stringify(d)),!0):!1},get:function(a){return b?JSON.parse(b.getItem(a)):!1},remove:function(a){return b?(b.removeItem(a),!0):!1},canStore:function(a){switch(typeof a){case"string":case"number":return!0}return c||console&&console.warn("localStore cannot serialise object data."),c},clear:function(){b.clear()}}}(c),function(a){var b=function(){function a(a){return Object.prototype.toString.call(a)}function b(b){return"[object String]"===a(b)}var c=navigator.userAgent.toLowerCase(),d=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,e=[["trident",d],["webkit",/\bapplewebkit[\/]?([0-9.+]+)/],["gecko",/\bgecko\/(\d+)/],["presto",/\bpresto\/([0-9.]+)/]],f=[["ie",d],["firefox",/\bfirefox\/([0-9.ab]+)/],["opera",/\bopr\/([0-9.]+)/],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//]],g=[["windows",/\bwindows nt ([0-9.]+)/],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["linux","linux"]],h=[[6,"msie 6.0"],[7,"msie 7.0"],[8,"msie 8.0"],[9,"msie 9.0"],[10,"msie 10.0"]],i=function(a,c){for(var d in a){var e,f=a[d][0],g=a[d][1],h=b(g);if(h){if(-1!==c.indexOf(g))return e=f}else if(g.test(c))return e=f}return"unknow"};return{os:i(g,c),browser:i(f,c),engine:i(e,c),version:d.test(c)?i(h,c):""}},c=b();a.detector={os:c.os,engine:c.engine,browser:c.browser,version:c.version}}(c),function(a){var c={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},d=/.^/,e={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var f in e)e[e[f]]=f;var g=/\\|'|\r|\n|\t|\u2028|\u2029/g,h=function(a){return"\\"+e[a]};a.tmpl=function(a,e,f){f=b.extend({},f,c);var i=new RegExp([(f.escape||d).source,(f.interpolate||d).source,(f.evaluate||d).source].join("|")+"|$","g"),j=0,k="__p+='";a.replace(i,function(b,c,d,e,f){return k+=a.slice(j,f).replace(g,h),j=f+b.length,c?k+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?k+="'+\n((__t=("+d+"))==null?'':__t)+\n'":e&&(k+="';\n"+e+"\n__p+='"),b}),k+="';\n",f.variable||(k="with(obj||{}){\n"+k+"}\n"),k="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+k+"return __p;\n";try{var l=new Function(f.variable||"obj",k)}catch(m){throw m.source=k,m}if(e)return l(e);var n=function(a){return l.call(this,a)},o=f.variable||"obj";return n.source="function("+o+"){\n"+k+"}",n}}(c);var d=0,e=[].slice;c.widget=function(a,d,e){var f,g,h,i=a.split(".")[0],j={};return a=a.split(".")[1],f=i+"-"+a,e||(e=d,d=c.Base),b.expr[":"][f.toLowerCase()]=function(a){return!!b.data(a,f)},c[i]=c[i]||{},h=c[i][a]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new h(a,b)},h.version=e.version,g=new d,b.each(e,function(a,c){return b.isFunction(c)?void(j[a]=function(){var b=function(){return d.prototype[a].apply(this,arguments)},e=function(b){return d.prototype[a].apply(this,b)};return function(){var a,d=this._super,f=this._superApply;return this._super=b,this._superApply=e,a=c.apply(this,arguments),this._super=d,this._superApply=f,a}}()):void(j[a]=c)}),h.prototype=b.extend(!0,{},g,{namespace:i,widgetName:a,widgetFullName:f,constructor:h,widgetEventPrefix:h.prototype.widgetEventPrefix||a},j),c.bridge(a,h),h},c.Base=function(){},c.Base.prototype={_createWidget:function(a,c){this.$el=b(a),this.uuid=d++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=b.extend(!0,{},this.options,this.$el.data(),c),b.data(this.$el[0],this.widgetFullName,this),this.bindings=b(),this._create(),this._trigger("create"),this._init()},_create:b.noop,_init:b.noop,_destroy:b.noop,widget:function(){return this.$el},option:function(a,c){var d,e,f,g=a;if(0===arguments.length)return b.extend(!0,{},this.options);if("string"==typeof a)if(g={},d=a.split("."),a=d.shift(),d.length){for(e=g[a]=b.extend(!0,{},this.options[a]),f=0;f<d.length-1;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(a=d.pop(),1===arguments.length)return void 0===e[a]?null:e[a];e[a]=c}else{if(1===arguments.length)return void 0===this.options[a]?null:this.options[a];g[a]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},destroy:function(){this._destroy(),this.$el.unbind(this.eventNamespace).removeData(this.widgetFullName),this.bindings.unbind(this.eventNamespace)},_trigger:function(a,c,d){var e,f,g=this.options[a];if(d=d||{},c=b.Event(c),c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),c.target=this.$el[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.$el.trigger(c,d),!(b.isFunction(g)&&g.apply(this.$el[0],[c].concat(d))===!1||c.isDefaultPrevented())},_on:function(a,c,d){var e,f=this;"boolean"!=typeof a&&(d=c,c=a,a=!1),d?(c=e=b(c),this.bindings=this.bindings.add(c)):(d=c,c=this.$el,e=this.widget()),b.each(d,function(d,g){function h(){return a||f.options.disabled!==!0?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||b.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},tpl2html:function(){var a=this.template;console.info(a,"tpl")}},c.bridge=function(a,c){var d=c.prototype.widgetFullName||a;b.fn[a]=function(f){var g="string"===b.type(f),h=e.call(arguments,1),i=this;return f=!g&&h.length?b.extend.apply(null,[!0,f].concat(h)):f,this.each(g?function(){var c,e=b.data(this,d);return"instance"===f?(i=e,!1):b.isFunction(e[f])&&"_"!==f.charAt(0)?(c=e[f].apply(e,h),c!==e&&void 0!==c?(i=c&&c.jquery?i.pushStack(c.get()):c,!1):void 0):b.error(f+"' 是 "+a+" 的私有方法，不可直接调用")}:function(){var a=b.data(this,d);a?a._init&&a._init():b.data(this,d,new c(this,f))}),i}},"function"==typeof define&&define(function(a,b,d){d.exports=c})}}(window,jQuery,void 0),function(a){var b=function(){}.toString().match(/\/\*\s([\s\S]*)\s\*\//),c=["assert","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","time","timeEnd","trace","warn"];a.debugMode=!!b&&"DEBUG_MODE"===b[1]&&"undefined"!=typeof console;for(var d in c){var e=c[d];a[e]=a.debugMode?console[e]:$.noop}}(Pui),Pui.add("backtop",function(a,b,c){"use strict";function d(){g.length&&(f(),e())}function e(){h.on("scroll",b.throttle(function(){f()},500)),i.on("click",function(a){a.preventDefault(),h.scrollTop(0)})}function f(){var a=h.scrollTop();a>h.height()?i.show():i.hide()}var g=c("#J_fixedBar"),h=b.$win,i=c("#J_backTop");a.init=d}),function(a,b){var c={backSpace:8,esc:27,up:38,down:40,tab:9,enter:13,home:36,end:35,pageUp:33,pageDown:34,space:32};a.widget("pp.autocomplete",{version:"0.1.0",options:{text:"text",value:"value",cache:!0,delay:100,minChars:1,caseSensitive:!0,keySelect:!0,listTpl:'<li class="J_listItem">{text}</li>',className:{list:"list",listItem:"list_item",active:"list_item_active"},zIndex:999},_create:function(){var a,b=this.options;this.input=this.$el,this.dataMode=this._getDataMode(),this.dataMode&&(b.cache&&(this.cache={}),this.input.attr("autocomplete","off"),a=parseInt(b.queryDelay,10),this.delay=isNaN(a)||0>a?100:a,this.disabled=!!b.disabled,this._buildList(),this._bindEvent())},_getDataMode:function(){var a,b=this.options,c=b.source,d=typeof c;switch(d){case"string":this.url=c,a="remote";break;case"object":this.data=c,a="local"}return a},setCache:function(a){a&&!this.cache?this.cache={}:!a&&this.cache&&(this.cache=null)},_bindEvent:function(){var a=this,c=this.options;this._bindInputKeyEvent(),this.input.on("focus",function(){a.disabled||a._focus()}).on("blur",function(){a._blur()}),b(document).on("click",function(c){var d=c.target||c.srcElement;0===b(d).closest(a.input).length&&0===b(d).closest(a.list).length&&a.collapse()}),this.list.on("mouseenter","."+c.className.listItem,function(){var b=a.listItems.index(this);a._active(b)}).on("mouseleave","."+c.className.listItem,function(){b(this).removeClass(c.className.active)}).on("click","."+c.className.listItem,function(){var b=a.listItems.index(this);a._select(b),a.collapse()})},_bindInputKeyEvent:function(){var a=this,d=this.options;this.input.on("keydown",function(b){if(!a.disabled)switch(b.keyCode){case c.down:case c.up:if(a.isExpanded){b.preventDefault();var e=a.listItems,f=a._getActiveItemIdx();f=b.keyCode===c.down?-1===f||f===e.length-1?0:f+1:-1===f||0===f?e.length-1:f-1,a._active(f),d.keySelect&&a._select(f)}}}).on("keyup",function(c){if(!a.disabled){var e=b.trim(b(this).val());if(!e)return void a.collapse();var f=c.which,g=9==f||13==f||27==f||f>=16&&20>=f||f>=33&&40>=f||f>=44&&46>=f||f>=112&&123>=f||144==f||145==f;e.length>=d.minChars&&!g&&a.queryDelay(e)}})},_buildList:function(){var a=this.options,c=parseInt(a.listWidth,10);c=isNaN(c)?this.input.outerWidth():c,iframeOpts=a.iframe,a.listNode&&1==b(a.listNode).length?(this.list=b(a.listNode).show(),this.list.hide()):(this.list=b("<div class="+a.className.list+" />").appendTo("body").css({position:"absolute",overflow:"auto",zIndex:a.zIndex}).outerWidth(c).hide(),this._setListPosition(),b(window).on("resize",function(){self.isExpanded&&self._setListPosition()})),this.iframe=this.list.parent().iframe({iframe:iframeOpts}).data("pp-iframe")},_setListPosition:function(){var a=this.input.offset(),b=this.options.positionAdjuct,c=parseInt(b.x,10),d=parseInt(b.y,10);c=isNaN(c)?0:c,d=isNaN(d)?0:d,this.list.css({top:this.input.outerHeight()+a.top+d,left:a.left+c})},_select:function(a){var b;this._selectedIndex=a,b=this._getText()||this.queryKey,this.input.val(b),this._trigger("select",this.filterData[a])},_getText:function(){var a=this._selectedIndex,b=this.options.text;return-1!==a?this.filterData[a]&&this.filterData[a][b]:void 0},_getValue:function(){var a=this._selectedIndex,b=this.options.value;return-1!==a?this.filterData[a]&&this.filterData[a][b]:void 0},_getListItems:function(){var a=this.options;return this.list.find("."+a.className.listItem)},_getActiveItemIdx:function(){var a=this.options,b=this.listItems,c=this.list.find("."+a.className.active);return b.index(c)},_addListItem:function(a){if(a){var b,c=this.options,d=c.displayFormatter;b="function"==typeof d?d(a,this.queryKey):this._renderListTpl(a),b?(this.list[0].innerHTML=b,this.expand()):this.collapse(),this.listItems=this._getListItems()}},_renderListTpl:function(a){for(var b=this.options.listTpl,c=[],d=0,e=a.length;e>d;d++){var f,g=a[d];f=b.replace(/{([\w\-]+)\}/g,function(a,b){return g[b]||""}),c.push(f)}return c.join("")},_filterLocalData:function(a){var b=this.options,c=[],d=b.customerMatch;if(a=a?a:"",""===a)return this.data;"function"!=typeof d&&(d=function(){var c=b.caseSensitive?"":"i",d=new RegExp(a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),c);return function(a){return-1===a.search(d)}}());for(var e=0,f=this.data.length;f>e&&!(c.length>=b.maxLength);e++){var g=this.data[e],h=b.text,i=g[h];d(i,a)&&c.push(g)}this.filterData=c,this._addListItem(c)},_active:function(a){var b=this.options,c=b.className.active;this.listItems.removeClass(c),(a||0===a)&&this.listItems.eq(a).addClass(c)},query:function(a){var b=this.dataMode;return this.queryKey=a,this.cache&&this.cache[a]?(this.filterData=this.cache[a],void this._addListItem(this.filterData)):void("local"===b?this._filterLocalData(a):"remote"===b&&this._loadAjaxData(a))},queryDelay:function(a){var b=this;this.queryTimer&&window.clearTimeout(b.queryTimer),b.queryTimer=window.setTimeout(function(){b.query(a)},this.delay)},_loadAjaxData:function(a){var c=this.options,d=this,e=c.ajaxOptions,f=c.dataFormatter;this.xhr&&this.xhr.abort(),this.xhr=b.ajax(b.extend({},e,{url:d.url.replace(/{query}/g,a),complete:function(a,b){"function"==typeof e.complete&&e.complete(a,b),d.xhr=null},success:function(b,c){"function"==typeof e.success&&e.success(b,c),d.filterData="function"==typeof f?f(b):b,d._addListItem(d.filterData),d.cache&&(d.cache[a]=d.filterData),d._trigger("ajaxSuccess",b,c)},error:function(a,b,c){"function"==typeof e.error&&e.error(a,b,c),d._trigger("ajaxError",a,b,c)}}))},_focus:function(){var a=b.trim(this.input.val());a&&this.queryDelay(a)},_trigger:function(a){var b=Array.prototype.slice.call(arguments,1);a=a.toLowerCase(),a=this["on"+a]||this["on"+a.substring(0,1).toUpperCase()+a.substring(1)],"function"==typeof a&&a.apply(this,b)},_blur:function(){},collapse:function(){if(this.iframe.syncIframe("hide"),this.isExpanded){{this.options}this.list.hide(),this.isExpanded=!1}},expand:function(){this.iframe.syncIframe("show"),this.isExpanded||(this.list.show(),this.isExpanded=!0)},enable:function(){this.disabled&&(this.disabled=!1)},disable:function(){this.disabled||(this.disabled=!0,this.collapse())}})}(Pui,jQuery),function(a){var b=-1!==(window.navigator.userAgent||"").toLowerCase().indexOf("msie 6");a.widget("pp.iframe",{version:"0.1.0",options:{iframe:{target:"body",className:"mod_pop_iframe",width:null,height:null,top:null,left:null}},_create:function(){b&&(this.$target=this.$el.find(this.options.iframe.target))},_createIframe:function(){var a={display:"none",border:"none",opacity:0,position:"absolute"},b=this.$target.css("zIndex");return b&&b>0&&(a.zIndex=b-1),this.$iframe=$("<iframe>",{src:"javascript:''",frameborder:0,"class":this.options.iframe.className,css:a}).insertBefore(this.$target),this.$iframe},syncIframe:function(a){var b,c,d,e,f,g=this.$target,h=this.$iframe,i=this.options.iframe;g&&g.length&&("hide"===a?h&&h.hide():(h||(h=this._createIframe()),c=i.height||g.outerHeight(),b=i.width||g.outerWidth(),d=g.position(),e=$.isNumeric(i.left)?i.left:d.left,f=$.isNumeric(i.top)?i.top:d.top,h.css({height:c,width:b,top:f,left:e}),h.show()))},_destroy:function(){this.$iframe&&(this.$iframe.remove(),delete this.$iframe)}})}(Pui),function(a,b){a.widget("pp.lazyloader",{version:"0.1.0",options:{srcLazyAttr:"data-lazy",moduleLazyAttr:"data-lazy-module",autoDestroy:!0,dynamic:!0,threshold:150,moduleLoadCallback:null},_create:function(){var a=this.options;this.container=this.$el,(a.dynamic||(this._filterItems(),0!==this.srcLazyItems.length||0!==this.moduleLazyItems.length))&&(this._bindEvent(),this.load(),this.container.data("Lazyloader",this))},_filterItems:function(){var a=this.options;this.srcLazyItems=this.container.find("["+a.srcLazyAttr+"]"),this.moduleLazyItems=this.container.find("["+a.moduleLazyAttr+"]")},_bindEvent:function(){var b=this;this._loadFn=function(){return b.timer&&window.clearTimeout(b.timer),b.curTime=+new Date,b.startTime||(b.startTime=b.curTime),b.curTime-b.startTime>100?(b.load(),void(b.startTime=void 0)):void(b.timer=window.setTimeout(function(){b.load()},30))},a.$win.on("resize.lazyloader scroll.lazyloader",this._loadFn)},load:function(){var a=this.options;a.dynamic&&this._filterItems(),this._loadSrc(),this._loadModule(),a.dynamic||(this._filterItems(),0===this.srcLazyItems.length&&0===this.moduleLazyItems.length&&a.autoDestroy&&this.destroy())},_loadSrc:function(){var a=this.options,c=this,d=a.srcLazyAttr,e=this.srcLazyItems;b.each(e,function(){var a,e=b(this),f=this.tagName.toLowerCase();c._isInViewport(e)&&(a=e.attr(d),"img"===f||"iframe"===f?e.attr("src",a).removeAttr(d):e.css("background-image","url("+a+")").removeAttr(d))})},_loadModule:function(){var a=this.options,c=this,d=a.moduleLazyAttr,e=a.moduleLoadCallback,f=this.moduleLazyItems;b.each(f,function(){var a,f=b(this);c._isInViewport(f)&&(a=f.attr(d),f.removeAttr(d),"function"==typeof e&&e(a,f))})},_isInViewport:function(b){var c=a.$win,d=c.scrollTop(),e=this.options.threshold,f=d+c.height()+e,g=d-e,h=b.offset().top,i=h+b.outerHeight();return h>f||g>i?!1:!0},destroy:function(){a.$win.off("resize.lazyloader scroll.lazyloader",this._loadFn),this.container.removeData("Lazyloader").removeData("pp-lazyloader")}})}(Pui,jQuery),function(a){var b,c,d,e,f,g=3,h=5,i=100,j=300,k=null,l=[],m=a.$win;a.$doc.off("mousemove.menu").on("mousemove.menu",function(a){l.push({x:a.pageX,y:a.pageY}),l.length>g&&l.shift()}),a.widget("pp.menu",a.pp.iframe,{version:"0.1.5",options:{menuList:".cat_list",menuPop:".cat_pop",rowSelector:"> li",current:"on",tolerance:0,show:$.noop,iframe:{target:".cat_pop"}},_create:function(){var a=this.options;this.$menuList=this.$el.find(a.menuList),this.$menuItems=this.$menuList.find(a.rowSelector),this.$menuPop=this.$el.find(a.menuPop),this.offset=this.$el.offset(),this.size={width:this.$el.outerWidth(),height:this.$el.outerHeight()},this._initEvents(),this._super()},_initEvents:function(){var a=this;a._on({mouseleave:function(){a.clearTime(),f?d=setTimeout(function(){a.hideSubPop()},i):a.hideSubPop()}}),a._on(a.$menuItems,{mouseenter:function(b){var d,e=$(b.delegateTarget);a.clearTime(),f?(d=a.getIndex(e),a._possiblyActivate(d)):c=setTimeout(function(){d=a.getIndex(e),a._possiblyActivate(d)},i)}}),this._on(this.$menuPop,{"mouseenter >div":function(b){a.clearTime();var c=a.getIndex($(b.currentTarget));a.showSubPop(c)}})},clearTime:function(){b&&clearTimeout(b),d&&clearTimeout(d),c&&clearTimeout(c)},showSubPop:function(a){function b(){e=g.getMenuItem(a),g.$menuItems.removeClass(g.options.current),e.addClass(g.options.current),g.$menuPop.show(),c=e.data("top")||g.getMenuItemPos(a),g.$menuPop.css("top",c),g.getSubPop(a).show().siblings(":visible").hide(),k=a,f=!0,g.options.iframe.top=c,g.syncIframe("show")}var c,d,e,g=this;a!=k&&(d=this.options.show(a),d&&$.isPlainObject(d)&&d.done?d.done(b):b())},hideSubPop:function(){this.$menuItems.removeClass(this.options.current),this.$menuPop.add(this.$menuPop.children(":visible")).hide(),k=null,f=null,this._trigger("hide",{idx:k}),this.syncIframe("hide")},getIndex:function(a){var b=a.attr("data-index");return b||(b=a.index()),b},getSubPop:function(a){var b=this.$menuPop.find('[data-index="'+a+'"]');return b.length||(b=this.$menuPop.children().eq(a)),b},getMenuItem:function(a){var b=this.$menuItems.filter('[data-index="'+a+'"]');return b.length||(b=this.$menuItems.eq(a)),b},getMenuItemPos:function(a){var b,c=this.getMenuItem(a),d=parseFloat(c.offset().top,10),e=parseFloat(this.getSubPop(a).outerHeight(),10),f=parseFloat(this.$menuList.offset().top,10),g=parseFloat(m.height(),10),i=parseFloat(m.scrollTop(),10);return b=g>=d+e-i?d-f:g-(e+h)+i-f,c.data("top",b),b},_activationDelay:function(){function a(a,b){return(b.y-a.y)/(b.x-a.x)}if(null===k)return 0;var b=this.offset,c={x:b.left,y:b.top+this.options.tolerance},d={x:b.left,y:b.top+this.size.height+this.options.tolerance},f={x:b.left+this.size.width,y:c.y},g={x:b.left+this.size.width,y:d.y},h=l[l.length-1],i=l[0];if(!h)return 0;if(i||(i=h),i.x<b.left||i.x>g.x||i.y<b.top||i.y>g.y)return 0;if(e&&h.x==e.x&&h.y==e.y)return 0;var m=f,n=g,o=a(h,m),p=a(h,n),q=a(i,m),r=a(i,n);return q>o&&p>r?(e=h,j):(e=null,0)},_possiblyActivate:function(a){var c=this,d=c._activationDelay();d?b=setTimeout(function(){c._possiblyActivate(a)},d):c.showSubPop(a)},removePos:function(){this.$menuItems.removeData("top")}})}(Pui),function(a,b){a.widget("pp.slider",{version:"0.1.0",options:{scroller:".mod_slide_img",nav:".mod_slide_nav",triggerEvent:"mouseover",prevBtn:".mod_slide_btn_pre",nextBtn:".mod_slide_btn_next",curCls:"on",index:0,speed:500,delay:3e3,needBtn:!0,navTpl:"<li></li>",btnTpl:'<a href="#" class="mod_slide_btn"><i></i></a>',preload:!0,lazyload:"data-src",loadingCls:"mod_loading",autoPlay:!0,effect:"fade",btnHoverShow:!1,useWebkitTransition:!1},_create:function(){var a=this.options;this.element=this.$el,this.scroller=this.element.find(a.scroller),this.slides=this.scroller.children(),this.index=isNaN(a.index)?0:a.index,a.lazyload&&this._loadImg(this.index),this.slides.length<2||(this.navWrap=this.element.find(a.nav),this._createNav(),a.needBtn&&this._createBtns(),this.nav=this.navWrap.children(),this.speed=a.speed,this.autoPlay=a.autoPlay,this.delay=a.delay,this.length=this.slides.length,this.maxIndex=this.length-1,this.transition="webkitTransition"in document.body.style&&a.useWebkitTransition,this._initEffect(),this.autoPlay&&this.play(),this._bindEvent())},effectFns:{none:function(a){this.slides.hide().eq(a).show()},fade:function(a){var b=this.index;this.slides.eq(b).stop().css("z-index",0).animate({opacity:0},this.speed),this.slides.eq(a).stop().css("z-index",1).animate({opacity:1},this.speed)},scrollX:function(a){this.scroller.stop().animate({left:-a*this.stepWidth},this.speed)},scrollY:function(a){this.scroller.stop().animate({top:-a*this.stepWidth},this.speed)}},_bindEvent:function(){var a=this.options,c=this;this.nav.on(a.triggerEvent,function(){var a=c.nav.index(b(this));a!=c.index&&c.slideTo(a)}),this.element.on("mouseenter",function(){c.autoPlay&&c.stop()}).on("mouseleave",function(){c.autoPlay&&c.play()}),a.needBtn&&(a.btnHoverShow&&this.element.on("mouseenter",function(){c.prevBtn.fadeIn(),c.nextBtn.fadeIn()}).on("mouseleave",function(){c.prevBtn.fadeOut(),c.nextBtn.fadeOut()}),this.prevBtn.on("click",function(a){a.preventDefault(),c.prev()}),this.nextBtn.on("click",function(a){a.preventDefault(),c.next()}))},_createNav:function(){if(0!=this.navWrap.length){for(var a=this.options.navTpl,b=[],c=0,d=this.slides.length;d>c;c++){var e=a.replace(/{index}/g,c+1);b.push(e)}this.navWrap.html(b.join(""))}},_createBtns:function(){var a=this.options,c=this.element.find(a.prevBtn),d=this.element.find(a.nextBtn);this.prevBtn=0===c.length?b(a.btnTpl).addClass(a.prevBtn.substring(1)).appendTo(this.element):c,this.nextBtn=0===d.length?b(a.btnTpl).addClass(a.nextBtn.substring(1)).appendTo(this.element):d},_initEffect:function(){var a=this.options,b=a.effect,c=this.slides,d=this.index;switch(this.effectFn=this.effectFns[b],b){case"none":c.hide().eq(d).show();break;case"fade":c.css({opacity:0,position:"absolute",top:0,left:0,"z-index":0}).eq(d).css({opacity:1,"z-index":1});break;case"scrollX":this.stepWidth=c.eq(0).width(),this.scroller.css({position:"absolute",width:this.length*this.stepWidth,left:-d*this.stepWidth}),c.css("float","left");break;case"scrollY":this.stepWidth=this.slides.eq(0).height(),this.scroller.css({position:"absolute",top:-d*this.stepWidth})}this._updateNav()},getIndex:function(){return this.index},play:function(){var a=this;this.timer||(this.timer=window.setInterval(function(){a.next()},this.delay))},stop:function(){this.timer&&(window.clearInterval(this.timer),this.timer=null)},slideTo:function(a){var b=this.options;a===this.index||0>a||a>this.maxIndex||(this.effectFn(a),this.index=a,this._updateNav(),b.lazyload&&this._loadImg(a),b.lazyload&&b.preload&&(a=0===a?this.maxIndex:a===this.maxIndex?0:a,this._loadImg(a)))},next:function(){var a=this.index+1;a>this.maxIndex&&(a%=this.length),this.slideTo(a)},prev:function(){var a=this.index-1;0>a&&(a=this.maxIndex),this.slideTo(a)},_loadImg:function(a){var c=this,d=this.slides.eq(a).find("img"),e=this.options,f=e.lazyload,g=e.loadingCls,h=b(d).attr(f);if(h){this.slides.eq(a).addClass(g);var i=new Image;b(i).on("load",function(){d.attr("src",h).removeAttr(f),c.slides.eq(a).removeClass(g)}),i.src=h}},_updateNav:function(){var a=this.index,b=this.options.curCls;this.nav.eq(a).addClass(b).siblings().removeClass(b)}})}(Pui,jQuery),function(){function a(a,b){return a=a.replace(/{([\w\-]+)\}/g,function(a,c){return void 0!==typeof b[c]?b[c]:""})}function b(a){return a.replace(/[\u00FF-\uFFFF]/g,"  ").length}function c(a,c,d,e){var f=b(a);if(f>d-c){var e=e||"",g=a.replace(/[\u00FF-\uFFFF]/g,"@-").substr(c,d),h=g.match(/@-/g)?g.match(/@-/g).length:0;return a.substring(0,d-h)+e}return a}function d(a,b,c){function d(b,c){var d=a.split(b);a=d.join(c)}if(void 0!=c)d(b,c);else for(var e in b)d(e,b[e]);return a}var e="undefined"!=typeof PAGE_TYPE?PAGE_TYPE:"",f={tpl:{shopUrl:"http://se.paipai.com/shop_search?KeyWord={keyword}&Platform=1&charSet=gbk&sf={sf}",goodsUrl:"http://se.paipai.com/comm_search?KeyWord={keyword}&sClassid={classId}&Platform=1&charSet=gbk&sf={sf}&ac=0&as=1&Property=128&PTAG=20084.2.2",classHtml:'<li class="J_searchItem"><a href="{url}">在<strong>{className}</strong>中搜索<span>{keyword}</span></a></li>',listHtml:'<li class="J_searchItem"><a href="{url}"><em>{keyword}</em><span>约{count}个结果</span></a>',shopHtml:'<li class="J_searchItem"><a href="{url}">搜索<strong>“{keyword}"</strong>的<span>店铺</span></a>'},shopKeys:["旗舰店","专卖店","专营店"],init:function(){var a=this;this.initPlaceholder(),this.initAutoComplete(),"shop"!==e&&0!==$("#J_searchType").length&&this.initSearchType(),"shop"===e&&$("#J_searchAll").on("click",function(b){b.preventDefault(),a.siteSearch()}),this.initSearchForm()},initPlaceholder:function(){var a=$("#J_placeholder"),b=$("#KeyWord");$.trim(b.val())&&a.hide(),b.on("keyup change",function(){$.trim($(this).val())&&a.hide()}).on("blur",function(){$.trim($(this).val())||a.show()}),a.on("click",function(){b.focus()})},dataFormatter:function(b){var d,e=[],g=b.hotclass,h=b.list;if(g&&g.length>0)for(var i=0,j=g.length;j>i;i++){var k,l=g[i];"0"!==l[1]&&(d=a(f.tpl.goodsUrl,{keyword:encodeURIComponent(c(l[0],0,100)),classId:l[1],sf:102}),k={keyword:l[0],classId:l[1],className:l[2],url:d},e.push(k))}if(h&&h.length>0)for(var i=0,j=h.length;j>i;i++){var k,l=h[i];d=a(f.tpl.goodsUrl,{keyword:encodeURIComponent(c(l[0],0,100)),classId:0,sf:102}),k={keyword:l[0],count:l[1],url:d},e.push(k)}return e},displayFormatter:function(b,d){var g=[],h=[],i=[];if("shop"===e){i.push('<ul class="mod_s_pop_shop">');var j=a(f.tpl.shopUrl,{keyword:encodeURIComponent(c(d,0,100)),sf:105});i.push(a(f.tpl.shopHtml,{keyword:d,url:j})),i.push("</ul>")}for(var k=0,l=b.length;l>k;k++){var m=b[k];m.classId?g.push(a(f.tpl.classHtml,m)):h.push(a(f.tpl.listHtml,m))}return g.length>0&&(g.unshift('<ul class="mod_s_pop_cat">'),g.push("</ul>")),h.length>0&&(h.unshift('<ul class="mod_s_pop_key">'),h.push("</ul>")),g.join("")+h.join("")+(0===i.length?"":i.join(""))},initAutoComplete:function(){this.autocomplete=$("#KeyWord").autocomplete({text:"keyword",listNode:"#J_searchPop",source:"http://search.paipai.com/cgi-bin/isuggest_paipai?KeyWord={query}",dataFormatter:this.dataFormatter,displayFormatter:this.displayFormatter,ajaxOptions:{type:"GET",dataType:"jsonp"},className:{listItem:"J_searchItem",active:"on"},iframe:{target:"#J_searchPop",className:"mod_s_iframe",top:35,left:0}}).data("pp-autocomplete")},hasShopKey:function(a){if(this.shopKeys.length<0)return!1;for(var b=0,c=this.shopKeys.length;c>b;b++){var d=this.shopKeys[b];if(-1!==a.indexOf(d))return!0}return!1},initSearchForm:function(){var a=this;$("#J_searchForm").on("submit",function(b){b.preventDefault(),"shop"===e?a.shopSearch():a.siteSearch()})},siteSearch:function(){var b,d,e=$.trim($("#KeyWord").val()),f=$.trim($("#sDefKeyword").val());return e?(d=this.hasShopKey(e),e=encodeURIComponent(c(e,0,100)),b=1==this.searchType||d?a(this.tpl.shopUrl,{keyword:e,sf:101}):a(this.tpl.goodsUrl,{keyword:e,classId:0,sf:101}),void(window.location.href=b)):void(f&&(window.location.href=f))},shopSearch:function(){var a=$.trim($("#KeyWord").val());a&&(a=d(a,"%","%25"),a=d(a,"&","%26"),$.getScript("http://my.paipai.com/cgi-bin/myshop/encode?SRC="+a+"&position=0&scope=0"),window.EncodeCallBack=function(a){if("0"==a.ErrCode){var b="undefined"==typeof pageMess?shopData.qqUin:pageMess.qqUin,c="http://shop.paipai.com/"+b+"/0-0000000000-0-1-1-0-3-0-0-0/"+a.EncodeString+"/index.shtml";window.location.href=c}})},initSearchType:function(){var a=this;$("#J_searchType li").on("click",function(){if(!$(this).hasClass("on")){var b=$(this).data("type");a.searchType=b,1==b?a.autocomplete.disable():a.autocomplete.enable(),$("#searchType").val(b),$(this).addClass("on").siblings().removeClass("on"),$(this).insertBefore($("#J_searchType li").eq(0)),$("#J_searchType").removeClass("mod_s_frm_sel_hover"),$("#KeyWord").focus()}}),$("#J_searchType").on("mouseenter",function(){$(this).addClass("mod_s_frm_sel_hover")}).on("mouseleave",function(){$(this).removeClass("mod_s_frm_sel_hover")}),$("#J_searchType a").on("click",function(a){a.preventDefault()})}};f.init()}(),function(a,b){var c=b.detector,d="ie"===c.browser&&c.version&&c.version<9,e=a("body"),f=function(){var d=b.supports("Transition")?"transitions":"notransitions",d=b.supports("animation")?d+" animations":d+" noanimations",e=c.version?"ie"+c.version:"";a("html").addClass(d+" "+c.os+" "+c.engine+" "+c.browser+" "+e)},g=function(){var a=1,c=function(){var b=(document.documentElement.clientWidth||document.body.clientWidth)<1190;b&&1===a?(a=2,d&&e.addClass("p_mini"),e.trigger("resizebody",["mini"])):b||2!==a||(a=1,d&&e.removeClass("p_mini"),e.trigger("resizebody",["normal"]))};d&&c(),b.$win.on("resize.global",b.throttle(function(){c()},500))},h=function(){if(c.version<7)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}},i=function(){f(),!e.hasClass("p_mini")&&g(),h()};i()}(jQuery,Pui),function(a){var b=function(a,b){$(a).hover(function(){$(this).addClass(b)},function(){$(this).removeClass(b)})},c=function(){b("#J_headUser","mod_user_more_on"),b("#J_headPp","mod_pt_pp_on"),b("#J_headSeller","mod_user_more_on"),$("#J_headPp").one("mouseenter",function(){a.loadAsset($(this))})},d=function(a,b,c){var d;$(a).hover(function(){d&&clearTimeout(d),$(this).addClass(b)
},function(){var a=$(this);d=setTimeout(function(){a.removeClass(b)},c)})},e=function(){c(),d("#J_headChnn","mod_chnn_more_on",300)};e()}(Pui);/*  |xGv00|b1251250645f7f22921c02019635179a */