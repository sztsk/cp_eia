/*
 * Copyright 2014, hugohua
 *
 * Released on: 2014-07-20 10:44:38 PM  hugohua
*/
!function(a){a.rAF=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)}}(window),function(a,b){if(!a.Pui){var c=a.Pui={version:"0.1.0"};c.mix=function(a,b){for(var c in b)a[c]=b[c];return a},c.mix(c,{$win:b(a),$doc:b(document),add:function(a,c){var d,e={},f=this;if("string"!=typeof a)return void b.error(a+"必须是个字符串！");f[a]=f[a]||{},d=c(e,f,b),d&&b.isPlainObject(d)&&b.extend(e,d);for(var g in e)f[a][g]=e[g],"init"===g?e[g]():"lazyInit"===g?!function(b){setTimeout(function(){f[a][b]()},1e3)}(g):"winLoad"===g&&!function(b){f.$win.load(function(){f[a][b]()})}(g);e=null},supports:function(a){var b,c=document.createElement("div"),d="Khtml Ms O Moz Webkit".split(" ");if(a in c.style)return!0;for(a=a.replace(/^[a-z]/,function(a){return a.toUpperCase()}),b=d.length-1;b>=0;){if(d[b]+a in c.style)return!0;b--}return!1},debounce:function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},throttle:function(a,b){var c,d,e,f,g,h,i=this.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var j=function(){e=null,g&&(h=a.apply(c,d)),i()};return e||(e=setTimeout(j,b)),f?g=!0:(f=!0,h=a.apply(c,d)),i(),h}},loadAsset:function(a){var c=a.find("[data-src]");c.length&&c.each(function(){var a=b(this),c=a.attr("data-src");a.attr("src",c).removeAttr("data-src")})}}),function(a){function b(a,b){var d={};if(c(a)&&a.length>0)for(var e,g,i,j=b?h:f,k=a.split(/;\s/g),l=0,m=k.length;m>l;l++){if(i=k[l].match(/([^=]+)=/i),i instanceof Array)try{e=h(i[1]),g=j(k[l].substring(i[1].length+1))}catch(n){}else e=h(k[l]),g="";e&&(d[e]=g)}return d}function c(a){return"string"==typeof a}function d(a){return c(a)&&""!==a}function e(a){if(!d(a))throw new TypeError("Cookie name must be a non-empty string")}function f(a){return a}var g={},h=decodeURIComponent,i=encodeURIComponent;g.get=function(a,c){e(a),c="function"==typeof c?{converter:c}:c||{};var d=b(document.cookie,!c.raw);return(c.converter||f)(d[a])},g.set=function(a,b,c){e(a),c=c||{};var f=c.expires,g=c.domain,h=c.path;c.raw||(b=i(String(b)));var j=a+"="+b,k=f;return"number"==typeof k&&(k=new Date,k.setDate(k.getDate()+f)),k instanceof Date&&(j+="; expires="+k.toUTCString()),d(g)&&(j+="; domain="+g),d(h)&&(j+="; path="+h),c.secure&&(j+="; secure"),document.cookie=j,j},g.remove=function(a,b){return b=b||{},b.expires=new Date(0),this.set(a,"",b)},a.cookie=g}(c),function(a){var b=null,c="undefined"!=typeof JSON;"undefined"!=typeof localStorage&&(b=localStorage),a.localStore={set:function(c,d){return b&&a.localStore.canStore(d)?(b.setItem(c,JSON.stringify(d)),!0):!1},get:function(a){return b?JSON.parse(b.getItem(a)):!1},remove:function(a){return b?(b.removeItem(a),!0):!1},canStore:function(a){switch(typeof a){case"string":case"number":return!0}return c||console&&console.warn("localStore cannot serialise object data."),c},clear:function(){b.clear()}}}(c),function(a){var b=function(){function a(a){return Object.prototype.toString.call(a)}function b(b){return"[object String]"===a(b)}var c=navigator.userAgent.toLowerCase(),d=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,e=[["trident",d],["webkit",/\bapplewebkit[\/]?([0-9.+]+)/],["gecko",/\bgecko\/(\d+)/],["presto",/\bpresto\/([0-9.]+)/]],f=[["ie",d],["firefox",/\bfirefox\/([0-9.ab]+)/],["opera",/\bopr\/([0-9.]+)/],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//]],g=[["windows",/\bwindows nt ([0-9.]+)/],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["linux","linux"]],h=[[6,"msie 6.0"],[7,"msie 7.0"],[8,"msie 8.0"],[9,"msie 9.0"],[10,"msie 10.0"]],i=function(a,c){for(var d in a){var e,f=a[d][0],g=a[d][1],h=b(g);if(h){if(-1!==c.indexOf(g))return e=f}else if(g.test(c))return e=f}return"unknow"};return{os:i(g,c),browser:i(f,c),engine:i(e,c),version:d.test(c)?i(h,c):""}},c=b();a.detector={os:c.os,engine:c.engine,browser:c.browser,version:c.version}}(c),function(a){var c={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},d=/.^/,e={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var f in e)e[e[f]]=f;var g=/\\|'|\r|\n|\t|\u2028|\u2029/g,h=function(a){return"\\"+e[a]};a.tmpl=function(a,e,f){f=b.extend({},f,c);var i=new RegExp([(f.escape||d).source,(f.interpolate||d).source,(f.evaluate||d).source].join("|")+"|$","g"),j=0,k="__p+='";a.replace(i,function(b,c,d,e,f){return k+=a.slice(j,f).replace(g,h),j=f+b.length,c?k+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?k+="'+\n((__t=("+d+"))==null?'':__t)+\n'":e&&(k+="';\n"+e+"\n__p+='"),b}),k+="';\n",f.variable||(k="with(obj||{}){\n"+k+"}\n"),k="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+k+"return __p;\n";try{var l=new Function(f.variable||"obj",k)}catch(m){throw m.source=k,m}if(e)return l(e);var n=function(a){return l.call(this,a)},o=f.variable||"obj";return n.source="function("+o+"){\n"+k+"}",n}}(c);var d=0,e=[].slice;c.widget=function(a,d,e){var f,g,h,i=a.split(".")[0],j={};return a=a.split(".")[1],f=i+"-"+a,e||(e=d,d=c.Base),b.expr[":"][f.toLowerCase()]=function(a){return!!b.data(a,f)},c[i]=c[i]||{},h=c[i][a]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new h(a,b)},h.version=e.version,g=new d,b.each(e,function(a,c){return b.isFunction(c)?void(j[a]=function(){var b=function(){return d.prototype[a].apply(this,arguments)},e=function(b){return d.prototype[a].apply(this,b)};return function(){var a,d=this._super,f=this._superApply;return this._super=b,this._superApply=e,a=c.apply(this,arguments),this._super=d,this._superApply=f,a}}()):void(j[a]=c)}),h.prototype=b.extend(!0,{},g,{namespace:i,widgetName:a,widgetFullName:f,constructor:h,widgetEventPrefix:h.prototype.widgetEventPrefix||a},j),c.bridge(a,h),h},c.Base=function(){},c.Base.prototype={_createWidget:function(a,c){this.$el=b(a),this.uuid=d++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=b.extend(!0,{},this.options,this.$el.data(),c),b.data(this.$el[0],this.widgetFullName,this),this.bindings=b(),this._create(),this._trigger("create"),this._init()},_create:b.noop,_init:b.noop,_destroy:b.noop,widget:function(){return this.$el},option:function(a,c){var d,e,f,g=a;if(0===arguments.length)return b.extend(!0,{},this.options);if("string"==typeof a)if(g={},d=a.split("."),a=d.shift(),d.length){for(e=g[a]=b.extend(!0,{},this.options[a]),f=0;f<d.length-1;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(a=d.pop(),1===arguments.length)return void 0===e[a]?null:e[a];e[a]=c}else{if(1===arguments.length)return void 0===this.options[a]?null:this.options[a];g[a]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},destroy:function(){this._destroy(),this.$el.unbind(this.eventNamespace).removeData(this.widgetFullName),this.bindings.unbind(this.eventNamespace)},_trigger:function(a,c,d){var e,f,g=this.options[a];if(d=d||{},c=b.Event(c),c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),c.target=this.$el[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.$el.trigger(c,d),!(b.isFunction(g)&&g.apply(this.$el[0],[c].concat(d))===!1||c.isDefaultPrevented())},_on:function(a,c,d){var e,f=this;"boolean"!=typeof a&&(d=c,c=a,a=!1),d?(c=e=b(c),this.bindings=this.bindings.add(c)):(d=c,c=this.$el,e=this.widget()),b.each(d,function(d,g){function h(){return a||f.options.disabled!==!0?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||b.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},tpl2html:function(){var a=this.template;console.info(a,"tpl")}},c.bridge=function(a,c){var d=c.prototype.widgetFullName||a;b.fn[a]=function(f){var g="string"===b.type(f),h=e.call(arguments,1),i=this;return f=!g&&h.length?b.extend.apply(null,[!0,f].concat(h)):f,this.each(g?function(){var c,e=b.data(this,d);return"instance"===f?(i=e,!1):b.isFunction(e[f])&&"_"!==f.charAt(0)?(c=e[f].apply(e,h),c!==e&&void 0!==c?(i=c&&c.jquery?i.pushStack(c.get()):c,!1):void 0):b.error(f+"' 是 "+a+" 的私有方法，不可直接调用")}:function(){var a=b.data(this,d);a?a._init&&a._init():b.data(this,d,new c(this,f))}),i}},"function"==typeof define&&define(function(a,b,d){d.exports=c})}}(window,jQuery,void 0),function(a,b){a.extend(jQuery.easing,{easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c}});var c=b.$win,d=!-[1]&&!window.XMLHttpRequest,e="webkit"===b.detector.engine?"body":"html";b.widget("pp.scrollnav",{options:{cssSlide:".page",duration:600,easing:"easeInOutQuint",clActive:"selected",pagerSensitive:null,offset:0,cssNavItem:"a",sticky:!1,cssSticky:"scroll_fixed",hash:!1},_create:function(){this.$navItems=this.$el.find(this.options.cssNavItem);var a=this.$el.attr("data-snav");a&&(this.options.cssSlide=a),this.reset(),this.top=this.$el.offset().top,this.isAnimating=!1,this.curIndex=-1,this.total=this.$navItems.length,this._bindEvt(),this.options.hash&&this._checkStatus()},_checkStatus:function(){var b=parseInt(getUrlParam("navs","#"),10)||0;a.isNumeric(b)&&this.goTo(b)},_bindEvt:function(){var e=this;e._on(e.$navItems,{click:function(a){var b=e.$navItems.index(a.delegateTarget);e.goTo(b),a.preventDefault()}}),e._on(c,{scroll:b.throttle(function(){if(e.updateSelectedNavIndex(),e.updateNav(e.curIndex),d){var b=a(window).scrollTop();e.$el.css({position:"absolute",top:b+e.top})}if(e.options.sticky){var f=c.scrollTop();f>=e.top?e.$el.addClass(e.options.cssSticky):e.$el.removeClass(e.options.cssSticky)}},50)})},goTo:function(b){var c,d=this;d.isAnimating||(c=d.offsets[b],d.curIndex=b,d.isAnimating=!0,d.updateNav(b),a(e).animate({scrollTop:c},d.options.duration,d.options.easing,function(){d.isAnimating=!1,d._trigger("done",null,{index:+d.curIndex})}))},goPrev:function(){var a=+this.curIndex-1;0>a||this.goTo(a)},goNext:function(){var a=+this.curIndex+1;a>=this.total||this.goTo(a)},updateNav:function(a){this.$navItems.removeClass(this.options.clActive).eq(a).addClass(this.options.clActive),this.options.hash&&setUrlParam("navs",a)},_getPageOffset:function(){var b=[],c=this;return a(this.options.cssSlide).each(function(d){var e=a(this),f=e.offset().top+c.options.offset;0==d&&(f=e.offset().top-140),b.push(f)}),b},updateSelectedNavIndex:function(){if(!this.isAnimating){var a=c.scrollTop(),b=c.height(),d=null!==this.options.pagerSensitive?this.options.pagerSensitive:b/2,e=0;for(var f in this.offsets)if(a+b-this.offsets[this.total-f-1]>=d){e=this.total-f-1;break}this.curIndex!==e&&(this.curIndex=e,this._trigger("done",null,{index:+e}))}},reset:function(){this.offsets=this._getPageOffset()}})}(jQuery,Pui),function(a,b){a.widget("pp.lazyloader",{version:"0.1.0",options:{srcLazyAttr:"data-lazy",moduleLazyAttr:"data-lazy-module",autoDestroy:!0,dynamic:!0,threshold:150,moduleLoadCallback:null},_create:function(){var a=this.options;this.container=this.$el,(a.dynamic||(this._filterItems(),0!==this.srcLazyItems.length||0!==this.moduleLazyItems.length))&&(this._bindEvent(),this.load(),this.container.data("Lazyloader",this))},_filterItems:function(){var a=this.options;this.srcLazyItems=this.container.find("["+a.srcLazyAttr+"]"),this.moduleLazyItems=this.container.find("["+a.moduleLazyAttr+"]")},_bindEvent:function(){var b=this;this._loadFn=function(){return b.timer&&window.clearTimeout(b.timer),b.curTime=+new Date,b.startTime||(b.startTime=b.curTime),b.curTime-b.startTime>100?(b.load(),void(b.startTime=void 0)):void(b.timer=window.setTimeout(function(){b.load()},30))},a.$win.on("resize.lazyloader scroll.lazyloader",this._loadFn)},load:function(){var a=this.options;a.dynamic&&this._filterItems(),this._loadSrc(),this._loadModule(),a.dynamic||(this._filterItems(),0===this.srcLazyItems.length&&0===this.moduleLazyItems.length&&a.autoDestroy&&this.destroy())},_loadSrc:function(){var a=this.options,c=this,d=a.srcLazyAttr,e=this.srcLazyItems;b.each(e,function(){var a,e=b(this),f=this.tagName.toLowerCase();c._isInViewport(e)&&(a=e.attr(d),e.hide(),"img"===f||"iframe"===f?e.attr("src",a).removeAttr(d):e.css("background-image","url("+a+")").removeAttr(d),e.fadeIn())})},_loadModule:function(){var a=this.options,c=this,d=a.moduleLazyAttr,e=a.moduleLoadCallback,f=this.moduleLazyItems;b.each(f,function(){var a,f=b(this);c._isInViewport(f)&&(a=f.attr(d),f.removeAttr(d),"function"==typeof e&&e(a,f))})},_isInViewport:function(b){var c=a.$win,d=c.scrollTop(),e=this.options.threshold,f=d+c.height()+e,g=d-e,h=b.offset().top,i=h+b.outerHeight();return h>f||g>i?!1:!0},destroy:function(){a.$win.off("resize.lazyloader scroll.lazyloader",this._loadFn),this.container.removeData("Lazyloader").removeData("pp-lazyloader")}})}(Pui,jQuery),function(a,b){a.widget("pp.slider",{version:"0.1.0",options:{scroller:".mod_slide_img",nav:".mod_slide_nav",triggerEvent:"mouseover",prevBtn:".mod_slide_btn_pre",nextBtn:".mod_slide_btn_next",curCls:"on",index:0,speed:500,delay:3e3,needBtn:!0,navTpl:"<li></li>",btnTpl:'<a href="#" class="mod_slide_btn"><i></i></a>',preload:!0,lazyload:"data-src",loadingCls:"mod_loading",autoPlay:!0,effect:"fade",btnHoverShow:!1,useWebkitTransition:!1},_create:function(){var a=this.options;this.element=this.$el,this.scroller=this.element.find(a.scroller),this.slides=this.scroller.children(),this.index=isNaN(a.index)?0:a.index,a.lazyload&&this._loadImg(this.index),this.slides.length<2||(this.navWrap=this.element.find(a.nav),this._createNav(),a.needBtn&&this._createBtns(),this.nav=this.navWrap.children(),this.speed=a.speed,this.autoPlay=a.autoPlay,this.delay=a.delay,this.length=this.slides.length,this.maxIndex=this.length-1,this.transition="webkitTransition"in document.body.style&&a.useWebkitTransition,this._initEffect(),this.autoPlay&&this.play(),this._bindEvent())},effectFns:{none:function(a){this.slides.hide().eq(a).show()},fade:function(a){var b=this.index;this.slides.eq(b).stop().css("z-index",0).removeClass(this.options.curCls).animate({opacity:0},this.speed),this.slides.eq(a).stop().css("z-index",1).addClass(this.options.curCls).animate({opacity:1},this.speed)},scrollX:function(a){this.scroller.stop().animate({left:-a*this.stepWidth},this.speed)},scrollY:function(a){this.scroller.stop().animate({top:-a*this.stepWidth},this.speed)}},_bindEvent:function(){var a=this.options,c=this;this.nav.on(a.triggerEvent,function(){var a=c.nav.index(b(this));a!=c.index&&c.slideTo(a)}),this.element.on("mouseenter",function(){c.autoPlay&&c.stop()}).on("mouseleave",function(){c.autoPlay&&c.play()}),a.needBtn&&(a.btnHoverShow&&this.element.on("mouseenter",function(){c.prevBtn.fadeIn(),c.nextBtn.fadeIn()}).on("mouseleave",function(){c.prevBtn.fadeOut(),c.nextBtn.fadeOut()}),this.prevBtn.on("click",function(a){a.preventDefault(),c.prev()}),this.nextBtn.on("click",function(a){a.preventDefault(),c.next()}))},_createNav:function(){if(0!=this.navWrap.length){for(var a=this.options.navTpl,b=[],c=0,d=this.slides.length;d>c;c++){var e=a.replace(/{index}/g,c+1);b.push(e)}this.navWrap.html(b.join(""))}},_createBtns:function(){var a=this.options,c=this.element.find(a.prevBtn),d=this.element.find(a.nextBtn);this.prevBtn=0===c.length?b(a.btnTpl).addClass(a.prevBtn.substring(1)).appendTo(this.element):c,this.nextBtn=0===d.length?b(a.btnTpl).addClass(a.nextBtn.substring(1)).appendTo(this.element):d},_initEffect:function(){var a=this.options,b=a.effect,c=this.slides,d=this.index;switch(this.effectFn=this.effectFns[b],b){case"none":c.hide().eq(d).show();break;case"fade":c.css({opacity:0,position:"absolute",top:0,left:0,"z-index":0}).eq(d).css({opacity:1,"z-index":1}).addClass(this.options.curCls);break;case"scrollX":this.stepWidth=c.eq(0).width(),this.scroller.css({position:"absolute",width:this.length*this.stepWidth,left:-d*this.stepWidth}),c.css("float","left");break;case"scrollY":this.stepWidth=this.slides.eq(0).height(),this.scroller.css({position:"absolute",top:-d*this.stepWidth})}this._updateNav()},getIndex:function(){return this.index},play:function(){var a=this;this.timer||(this.timer=window.setInterval(function(){a.next()},this.delay))},stop:function(){this.timer&&(window.clearInterval(this.timer),this.timer=null)},slideTo:function(a){var b=this.options;a===this.index||0>a||a>this.maxIndex||(this.effectFn(a),this.index=a,this._updateNav(),b.lazyload&&this._loadImg(a),b.lazyload&&b.preload&&(a=0===a?this.maxIndex:a===this.maxIndex?0:a,this._loadImg(a)))},next:function(){var a=this.index+1;a>this.maxIndex&&(a%=this.length),this.slideTo(a)},prev:function(){var a=this.index-1;0>a&&(a=this.maxIndex),this.slideTo(a)},_loadImg:function(a){var c=this,d=this.slides.eq(a).find("img"),e=this.options,f=e.lazyload,g=e.loadingCls,h=b(d).attr(f);if(h){this.slides.eq(a).addClass(g);var i=new Image;b(i).on("load",function(){d.attr("src",h).removeAttr(f),c.slides.eq(a).removeClass(g)}),i.src=h}},_updateNav:function(){var a=this.index,b=this.options.curCls;this.nav.eq(a).addClass(b).siblings().removeClass(b)}})}(Pui,jQuery),function(a,b){function c(a){return z.exec(a)?parseFloat(a)/100:a}function d(a){function b(){n.pointer=f(C,[!0,!0],k,j)}function c(){j=g(a),k=h(a),n.threshold=i(j)}function d(){n.timer.add(b)}function e(a){n.timer.remove(b),n.pointer=f([a.pageX,a.pageY],[!0,!0],k,j)}var j,k,l={"mouseenter.parallax":d,"mouseleave.parallax":e},m={"resize.parallax":c},n={elem:a,events:l,winEvents:m,timer:new D};return A.on(m),a.on(l),c(),n}function e(a,b,c){var d=a.data(b);return d||(d=c?c(a):{},a.data(b,d)),d}function f(a,b,c,d){for(var e=[],f=2;f--;)e[f]=(a[f]-c[f])/d[f],e[f]=e[f]<0?0:e[f]>1?1:e[f];return e}function g(a){return[a.width(),a.height()]}function h(a){var b=a.offset()||{left:0,top:0},c="none"===a.css("borderLeftStyle")?0:parseInt(a.css("borderLeftWidth"),10),d="none"===a.css("borderTopStyle")?0:parseInt(a.css("borderTopWidth"),10),e=parseInt(a.css("paddingLeft"),10),f=parseInt(a.css("paddingTop"),10);return[b.left+c+e,b.top+d+f]}function i(a){return[1/a[0],1/a[1]]}function j(a,b,c){return[b||a.outerWidth(),c||a.outerHeight()]}function k(a,d){for(var e=[a,d],f=2,g=[];f--;)g[f]="string"==typeof e[f]?e[f]===b?1:x[g[f]]||c(g[f]):e[f];return g}function l(a,b){return[y.test(a),y.test(b)]}function m(a,b,d){for(var e=[a,b],f=2,g=[];f--;)g[f]=d[f]?parseInt(e[f],10):g[f]=e[f]===!0?1:c(e[f]);return g}function n(a,b,c,d){for(var e=2,f=[];e--;)f[e]=b[e]?c[e]*(d[e]-a[e]):a[e]?c[e]*(1-a[e]):0;return f}function o(a,b){for(var c=2,d=[];c--;)a[c]&&(d[c]=100*b[c]+"%");return d}function p(a,b,c,d,e){for(var f=a.offsetParent(),g=a.position(),h=[],i=[],j=2;j--;)h[j]=c[j]?0:g[0===j?"left":"top"]/(f[0===j?"outerWidth":"outerHeight"]()-e[j]),i[j]=(h[j]-d[j])/b[j];return i}function q(a,b,c,d,e,f){for(var g,h,i=[],j=2,k={};j--;)a[j]&&(i[j]=a[j]*f[j]+c[j],b[j]?(g=e[j],h=-1*i[j]):(g=100*i[j]+"%",h=i[j]*d[j]*-1),0===j?(k.left=g,k.marginLeft=h):(k.top=g,k.marginTop=h));return k}function r(a,b,c,d,e,f,g){var h,i;if((!e[0]||Math.abs(a[0]-b[0])<c[0])&&(!e[1]||Math.abs(a[1]-b[1])<c[1]))return f&&f(),g(a);for(h=[],i=2;i--;)e[i]&&(h[i]=a[i]+d*(b[i]-a[i]));return g(h)}function s(a,b,c,d,e,f,g){return a[0]!==b[0]||a[1]!==b[1]?g(a):void 0}function t(a,b,c){a.off(b).removeData("parallax_port"),A.off(c)}function u(a,b,c){b.elem.off(c),b.layers=b.layers.not(a),0===b.layers.length&&t(b.elem,b.events,b.winEvents)}function v(a){var b={};a[0]&&(b.left="",b.marginLeft=""),a[1]&&(b.top="",b.marginTop=""),elem.css(b)}var w={mouseport:"body",xparallax:!0,yparallax:!0,xorigin:.5,yorigin:.5,decay:.66,frameDuration:30,freezeClass:"freeze"},x={left:0,top:0,middle:.5,center:.5,right:1,bottom:1},y=/^\d+\s?px$/,z=/^\d+\s?%$/,A=a(window),B=a(document),C=[0,0],D=function(){function a(){function a(){}function d(){var a=h.slice(0),d=a.length,e=-1;for(b&&console.log("timer frame()",d);++e<d;)a[e].call(this);c(g)}function e(){b&&console.log("timer start()"),this.start=a,this.stop=f,g=d,c(g)}function f(){b&&console.log("timer stop()"),this.start=e,this.stop=a,g=a}var g,h=[];this.callbacks=h,this.start=e,this.stop=f}var b=!1,c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(function(){a()},25)}}();return a.prototype={add:function(a){for(var c=this.callbacks,d=c.length;d--;)if(c[d]===a)return;this.callbacks.push(a),b&&console.log("timer add()",this.callbacks.length)},remove:function(a){for(var c=this.callbacks,d=c.length;d--;)c[d]===a&&c.splice(d,1);b&&console.log("timer remove()",this.callbacks.length),0===c.length&&this.stop()}},a}();a.fn.parallax=function(b){var c=a.extend({},a.fn.parallax.options,b),f=arguments,g=c.mouseport instanceof a?c.mouseport:a(c.mouseport),h=e(g,"parallax_port",d),i=h.timer;return this.each(function(b){function d(a){var b=q(B,A,C,y,D,a);v.css(b),E=a}function e(){F(h.pointer,E,h.threshold,x,B,G,d)}function g(){F=s}function t(){i.remove(e)}var u=this,v=a(this),w=f[b+1]?a.extend({},c,f[b+1]):c,x=w.decay,y=j(v,w.width,w.height),z=k(w.xorigin,w.yorigin),A=l(w.xparallax,w.yparallax),B=m(w.xparallax,w.yparallax,A),C=n(B,A,z,y),D=o(A,z),E=p(v,B,A,C,y),F=r,G=g,H={"mouseenter.parallax":function(){F=r,G=g,i.add(e),i.start()},"mouseleave.parallax":function(){F=r,G=t}};a.data(u,"parallax")&&v.unparallax(),a.data(u,"parallax",{port:h,events:H,parallax:B}),h.elem.on(H),h.layers=h.layers?h.layers.add(u):a(u)})},a.fn.unparallax=function(b){return this.each(function(){var c=a.data(this,"parallax");c&&(a.removeData(this,"parallax"),u(this,c.port,c.events),b&&v(c.parallax))})},a.fn.parallax.options=w,B.on("mousemove.parallax",function(a){C=[a.pageX,a.pageY]})}(jQuery),function(a){function b(){return d(i)}function c(){return d(h)}function d(a){var b=[];for(var c in a)b.push(a[c]);return b.join(" ")}var e="undefined"!=typeof e?e:!1,f=e?e.touch:!!("ontouchstart"in a||"onmsgesturechange"in a),g=f?"touchstart":"click",h={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},i={WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},j=function(){this.init()};j.version="0.0.1",j.prototype.init=function(){this.buttonPressedEvent=g,this.transitionEndEventName=e?i[e.prefixed("transition")]:b(),this.animationEndEventName=e?h[e.prefixed("animation")]:c(),this.transitionAnimationEndEvent=this.animationEndEventName+" "+this.transitionEndEventName},j.prototype.getViewportHeight=function(){var b=document.documentElement,c=b.clientHeight,d=a.innerHeight;return d>c?d:c},a.Effeckt=new j}(this),function(a){var b=a.Effeckt,c=Pui.supports("animation"),d=function(){return this instanceof d?void this.init():new d};d.version="0.0.1",d.prototype.init=function(){this.$body=$("body"),this.$element=null,this.$overlay=null,this.isShown=!1,this.hasPerspective=!1,this.modalEffeckt="",this.modalEffecktOut="",this.modalEffecktProvided=!0,this.bindUIActions()},d.prototype.bindUIActions=function(){$(document).on(b.buttonPressedEvent,".effeckt-modal-button",$.proxy(this.open,this)),$(document).on(b.buttonPressedEvent,'.effeckt-modal-close, [data-effeckt-dismiss="modal"]',$.proxy(this.close,this));var c=this;$(a).on("keyup",function(a){27===a.keyCode&&c.close(a)})},d.prototype.open=function(a){if(a.preventDefault(),!this.isShown){var d=$(a.currentTarget),e=d.data("effeckt-target");if(this.$element=$(e||"#effeckt-modal-wrap"),this.$element.length)return this.modalEffeckt=d.data("effeckt-type"),this.modalEffecktOut=d.data("effeckt-out-type"),d.data("effeckt-needs-perspective")&&(this.$body.addClass("effeckt-perspective"),this.hasPerspective=!0),c?void(this.$element.hasClass(this.modalEffeckt)||void 0===this.modalEffeckt?this.showModal():(this.modalEffecktProvided=!1,this.$element.addClass(this.modalEffeckt),this.$element.on(b.transitionAnimationEndEvent,$.proxy(function(){this.$element.off(b.transitionAnimationEndEvent),this.showModal()},this)))):void this.showModal()}},d.prototype.close=function(a){if(a.preventDefault(),this.isShown){if(!c)return this.hideModal(),this.$element.removeClass("effeckt-show"),void(this.isShown=!1);this.$element.on(b.transitionAnimationEndEvent,$.proxy(function(){this.$element.off(b.transitionAnimationEndEvent),this.hideModal()},this)),this.$element.removeClass("effeckt-show"),this.isShown=!1,this.modalEffecktOut&&this.$element.addClass(this.modalEffecktOut)}},d.prototype.showModal=function(){this.addOverlay(),this.$element.addClass("effeckt-show"),this.isShown=!0},d.prototype.hideModal=function(){this.modalEffecktOut&&(this.$element.removeClass(this.modalEffecktOut),this.modalEffecktOut=""),this.hasPerspective&&(this.$body.removeClass("effeckt-perspective"),this.hasPerspective=!1),this.removeOverlay(),this.$element.removeClass(this.modalEffeckt),this.modalEffeckt="",c||this.$element.removeClass("effeckt-show")},d.prototype.addOverlay=function(){var a=[];a.push('class="effeckt-overlay effeckt-modal-overlay"'),a.push('id="effeckt-modal-overlay"'),a.push('data-effeckt-dismiss="modal"'),this.$overlay=$("<div "+a.join(" ")+" />").insertAfter(this.$element),this.$overlay[0].offsetWidth},d.prototype.removeOverlay=function(){this.$overlay.remove(),this.$overlay=null},a.Effeckt.Modal=d()}(this),Pui.add("config",function(a){var b=-1!==window.location.href.indexOf("localhost"),c=function(){var a="http://1.fubi.pw/eic/server/";return b&&(a="http://localhost/github/cp_eic/server/"),a};a.root=c()}),Pui.add("rest",function(a,b){var c={dataType:"json"},d=b.config.root+"index.php/",e=function(a){return d+a},f=function(a,b){return $.extend(a,c),a.type=b||"GET",$.ajax(a)};a.addProduct=function(a){var b={data:a,url:e("product"),success:function(a){a.error&&alert(a.error.text)}};return f(b,"POST")},a.editProduct=function(a){var b=a.pro_id,c={data:a,url:e("product/"+b)};return f(c,"PUT")},a.getProducts=function(a,b){return b=b||{},a=a||1,b.url=e("products/cate/"+a),f(b)},a.getProductById=function(a,b){return b=b||{},b.url=e("product/"+a),f(b)},a.delProductById=function(a,b){return b=b||{},b.url=e("product/"+a),f(b,"DELETE")}}),Pui.add("func",function(a,b){var c=function(a){var b={};return $(":input[data-db-name]",a).each(function(){var a=$(this),c=a.attr("data-db-name");b[c]=a.val()}),b},d=function(a,b){for(var c in a)$(':input[data-db-name="'+c+'"]',b).val(a[c])},e=function(a,c,d){new qq.FileUploader({element:document.getElementById(a),action:b.config.root+"fileuploader.php",allowedExtensions:["jpg","jpeg","png","gif","swf"],params:{folder:c,newname:!0},onComplete:function(a,b,c){d&&"function"==typeof d&&d(c)}})},f=function(){var a,b,c,d=top.window.location.href,e="";if(a=d.split("#"==arguments[arguments.length-1]?"#":"?"),b=1==a.length?"":a[1],""!=b){c=b.split("&");var f=c.length,g=arguments[0]+"=";for(i=0;f>i;i++)if(0==c[i].indexOf(g)){e=c[i].replace(g,"");break}}return e};return{getDbData:c,setDbData:d,upload:e,getUrlParam:f}}),Pui.add("index",function(a,b){var c,d=b.$win,e=$("#J_navs"),f="webkit"===b.detector.engine?"body":"html",g=$("#J_modalCnt"),h=b.$doc,i=$("#J_proItem").html(),j=$("#J_proListUl"),k=$("#J_proPage"),l=$("#J_proCateImg"),m=9,n=function(){var a=b.supports("Transition")?"transitions":"notransitions",a=b.supports("animation")?a+" animations":a+" noanimations",c=b.detector,d=c.version?"ie"+c.version:"";$("html").addClass(a+" "+c.os+" "+c.engine+" "+c.browser+" "+d)},o=function(){var a=$("#J_header"),c=d.height(),e=function(){c=c>=1030?1030:d.height(),a.height(c)};e(),d.on("resize",b.throttle(function(){e()},500))},p=function(){e.scrollnav({sticky:!0,cssSticky:"navs_fixed",offset:-200}),$("#J_triggerNavs").find("a").on("click",function(){var a=$(this).index();return e.scrollnav("goTo",a),!1})},q=function(){$("#J_banner").slider({scroller:".banner_slider",nav:".banner_dot",triggerEvent:"mouseover",prevBtn:".banner_prev",nextBtn:".banner_next",navTpl:'<a class="b4{index}" href="javascript:;"></a>',autoPlay:!1,index:0})},r=function(a){b.rest.getProducts(a).done(function(a){if(!a)return void alert("该分类下没有找到相关的产品");for(var b=0,d=a.length;d>b;b++){var e=a[b].pro_imgs;a[b].pro_imgs=e?e.split(","):["demo/1.jpg"]}c=a,s(a)})},s=function(a){var c=a.length,d=Math.ceil(c/m),e="";j.html(b.tmpl(i,{items:a}));for(var f=1;d>=f;f++){var g=f*m-m,h=f*m;h>c&&(h=c),e+='<a href="javascript:;" data-start="'+g+'" data-end="'+h+'" class="J_page">'+f+"</a>"}k.show().html(e),k.find("a:eq(0)").trigger("click"),1>=d&&k.hide()},t=function(a){var b;return $.each(c,function(c,d){return d.pro_id==a?(b=d,!1):void 0}),b},u=function(){var a=function(a){return a?(a=a.replace(/\n/g,"</p><p>"),"<p>"+a+"</p>"):void 0},c=$("#effeckt-modal-wrap"),d=b.supports("animation");$("#J_cert,#J_media").find(".effeckt-modal-button").on("click.index",function(){var a=$(this),b=a.attr("href");if(g.html('<img src="'+b+'" />'),!d){var e=a.hasClass("cert_img");if(!e){var f=c.width()/2,h=c.height()/2;c.css({"margin-top":"-"+h+"px","margin-left":"-"+f+"px"})}}});var e=$("#J_popTpl").html(),f=$("#J_popCnt"),h=$("#J_proList");h.on("click",".J_pop",function(){{var c=$(this).attr("data-id"),d=t(c);d.pro_vars}d.pro_vars=a(d.pro_vars),d.pro_info=a(d.pro_info),f.html(b.tmpl(e,d))}),f.on("mouseenter",".J_sImg",function(){var a=$(this),b=a.attr("href");return f.find(".J_bImg").attr("src",b),a.addClass("selected").siblings("a").removeClass("selected"),!1})},v=function(){h.lazyloader({effect:"fadeIn",dynamic:!1})},w={mapEffect:function(){var a=$("#J_map");$("#J_scroll").find("li").hover(function(){var b=$(this),c=b.attr("data-city");b.addClass("selected").siblings("li").removeClass("selected"),a.find("."+c).addClass("bounceIn").siblings("b").removeClass("bounceIn")}),$("#J_scrollList").parallax({mouseport:jQuery("#J_scroll"),yparallax:!1})},gotoTop:function(){var a=$("#J_top");a.on("click",function(){$(f).animate({scrollTop:0},400)}),e.on("scrollnavdone",function(b,c){c.index>0?a.fadeIn():a.fadeOut()})},pageChange:function(){k.on("click","a",function(){var a=$(this),b=a.attr("data-start"),c=a.attr("data-end");a.addClass("selected").siblings("a").removeClass("selected"),j.find("li").hide().slice(b,c).show(),e.scrollnav("reset")})},cateChange:function(){$("#J_proCate").find(".J_cate").on("click",function(){var a=$(this),b=a.attr("data-cate-id");a.addClass("selected").siblings(".J_cate").removeClass("selected"),r(b),l.attr("src","images/cate/"+b+".png")})},init:function(){for(var a in this)this.hasOwnProperty(a)&&"init"!==a&&this[a]()}};a.init=function(){n(),o(),p(),q(),u(),r(1),w.init()},a.lazyInit=function(){v()}});